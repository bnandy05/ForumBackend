import{c as s}from"./chunk-2E775YSK.js";import{l}from"./chunk-QEZWEFJ4.js";import{M as a,R as i,i as n}from"./chunk-XER6BFA7.js";var p=class o{constructor(t,e){this.http=t;this.router=e}token=new n(null);apiUrl="https://berenandor.moriczcloud.hu/api";login(t,e){this.http.post(`${this.apiUrl}/login`,{email:t,password:e},{withCredentials:!0}).subscribe({next:r=>{localStorage.setItem("token",r.token),this.token.next(r.token),this.router.navigate(["/"])},error:r=>{console.error("Login failed",r),alert("Hib\xE1s email vagy jelsz\xF3.")}})}logout(){this.http.post(`${this.apiUrl}/logout`,{},{withCredentials:!0}).subscribe({next:()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},error:t=>{console.error("Logout failed",t),alert("Hiba t\xF6rt\xE9nt a kijelentkez\xE9s sor\xE1n.")}})}isAuthenticated(){return!!localStorage.getItem("token")}getUser(){return this.http.get(`${this.apiUrl}/user`)}static \u0275fac=function(e){return new(e||o)(i(l),i(s))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{p as a};
