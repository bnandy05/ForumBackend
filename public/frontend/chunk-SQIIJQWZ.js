import{c}from"./chunk-ZZ52UGRB.js";import{a as P,c as z,d as O,e as E,f as I,g as L,j as H,l as N}from"./chunk-EOIZ2S54.js";import{g as S,h as j,l as d}from"./chunk-BSM6PZT4.js";import{Fa as w,Ha as o,Ia as i,Ka as _,La as x,M as v,Ma as a,Na as y,Oa as u,Pa as f,Qa as h,R as p,i as C,ma as s,na as m,va as M,za as k}from"./chunk-ZOU52DSQ.js";var g=class r{constructor(n,e){this.http=n;this.router=e}token=new C(null);apiUrl="https://berenandor.moriczcloud.hu/api";login(n,e){this.http.post(`${this.apiUrl}/login`,{email:n,password:e},{withCredentials:!0}).subscribe({next:t=>{localStorage.setItem("token",t.token),this.token.next(t.token),this.router.navigate(["/"])},error:t=>{console.error("Login failed",t),alert("Hib\xE1s email vagy jelsz\xF3.")}})}logout(){this.http.post(`${this.apiUrl}/logout`,{},{withCredentials:!0}).subscribe({next:()=>{localStorage.removeItem("token"),this.token.next(null),this.router.navigate(["/login"])},error:n=>{console.error("Logout failed",n),alert("Hiba t\xF6rt\xE9nt a kijelentkez\xE9s sor\xE1n.")}})}isAuthenticated(){return this.token.asObservable()}static \u0275fac=function(e){return new(e||r)(p(d),p(c))};static \u0275prov=v({token:r,factory:r.\u0275fac,providedIn:"root"})};function B(r,n){if(r&1&&(o(0,"div",13),a(1),i()),r&2){let e=x();s(),y(" ",e.errorMessage," ")}}var D=class r{constructor(n,e,t){this.authService=n;this.router=e;this.http=t}email="";password="";errorMessage="";onSubmit(){let n={email:this.email,password:this.password};this.http.post("https://berenandor.moriczcloud.hu/api/login",n,{withCredentials:!0}).subscribe(e=>{localStorage.setItem("token",e.token),alert("Sikeres bejelentkez\xE9s!"),this.router.navigate(["/dashboard"])},e=>{this.errorMessage="Hib\xE1s bejelentkez\xE9si adatok. K\xE9rlek, pr\xF3b\xE1ld \xFAjra."})}onForgotPassword(){alert("Elfelejtett jelsz\xF3 funkci\xF3 hamarosan el\xE9rhet\u0151.")}static \u0275fac=function(e){return new(e||r)(m(g),m(c),m(d))};static \u0275cmp=M({type:r,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"login-container"],[1,"login-panel"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","\xCDrd be az email c\xEDmed","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","placeholder","\xCDrd be a jelszavad","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button"],[1,"additional-links"],["href","forgot-password"],["href","register"],[1,"error-message"]],template:function(e,t){e&1&&(o(0,"body")(1,"div",0)(2,"div",1)(3,"h2"),a(4,"Bejelentkez\xE9s"),i(),o(5,"form",2),_("ngSubmit",function(){return t.onSubmit()}),o(6,"div",3)(7,"label",4),a(8,"Email"),i(),o(9,"input",5),h("ngModelChange",function(l){return f(t.email,l)||(t.email=l),l}),i()(),o(10,"div",3)(11,"label",6),a(12,"Jelsz\xF3"),i(),o(13,"input",7),h("ngModelChange",function(l){return f(t.password,l)||(t.password=l),l}),i()(),k(14,B,2,1,"div",8),o(15,"button",9),a(16,"Bejelentkez\xE9s"),i(),o(17,"div",10)(18,"a",11),a(19,"Elfelejtett jelsz\xF3?"),i(),o(20,"a",12),a(21,"Regisztr\xE1ci\xF3"),i()()()()()()),e&2&&(s(9),u("ngModel",t.email),s(4),u("ngModel",t.password),s(),w("ngIf",t.errorMessage))},dependencies:[j,S,N,L,P,z,O,H,I,E],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:Arial,sans-serif;background:#1a1a2e;color:#e0e0e0;display:flex;justify-content:center;align-items:center;height:100vh}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}.login-panel[_ngcontent-%COMP%]{background:#25274d;border-radius:12px;box-shadow:0 8px 16px #0000004d;padding:2rem;width:100%;max-width:400px;text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.8rem;color:#e0e0e0}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#c9c9c9;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #3e4a73;border-radius:8px;font-size:1rem;outline:none;background:#2e2e4f;color:#e0e0e0;transition:border-color .3s ease,background .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#6a75d1;background:#353566;box-shadow:0 0 5px #6a75d180}.login-button[_ngcontent-%COMP%]{background:#6a75d1;color:#fff;padding:.8rem 1.2rem;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;width:100%;transition:background .3s ease,transform .2s ease}.login-button[_ngcontent-%COMP%]:hover{background:#5a64c4;transform:scale(1.02)}.login-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.additional-links[_ngcontent-%COMP%]{margin-top:1rem;font-size:.9rem}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-weight:700;color:#6a75d1;margin:0 .5rem;transition:color .3s ease}.additional-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#c9c9c9}.error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;font-size:14px}"]})};export{D as LoginComponent};
